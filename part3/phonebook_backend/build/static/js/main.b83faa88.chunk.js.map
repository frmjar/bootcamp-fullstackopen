{"version":3,"sources":["services/BBDD.js","components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["URL","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setNewNotification","save","name","number","axios","post","then","response","data","newContact","message","type","setTimeout","catch","alert","Promise","reject","Error","update","person","put","id","updateContact","onSubmit","evt","preventDefault","find","undefined","err","console","log","window","confirm","onChange","target","value","Persons","filter","clickHandler","newPersons","delete","deleteContact","error","toLowerCase","includes","map","onClick","Filter","newFilter","setNewFilter","Notification","clase","className","App","useState","newNotification","useEffect","get","e","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b83faa88.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst URL = 'http://localhost:3001/api/persons';\n\nexport const getAllContacts = () => {\n  return axios.get(URL).then(response => response.data);\n};\n\nexport const saveContact = (name, number) => {\n  return axios.post(URL, {name: name, number: number})\n              .then(response => response.data);\n};\n\nexport const deleteContact = (id) => {\n  return axios.delete(`${URL}/${id}`);\n};\n\nexport const updateContact = (person) => {\n  return axios.put(`${URL}/${person.id}`, person)\n              .then((response) => response.data);\n};","import React from 'react';\nimport {saveContact, updateContact} from '../services/BBDD';\n\nexport const PersonForm = ({\n  persons,\n  setPersons,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  setNewNotification,\n}) => {\n\n  const submitHandler = (evt) => {\n    evt.preventDefault();\n\n    const person = persons.find((person) => person.name === newName);\n\n    if (person === undefined) {\n      save().then(newContact => setPersons([\n        ...persons, newContact])).catch(err => console.log(err));\n    } else {\n      const wantUpdate = window.confirm(\n          `${person.name} is already added to phonebook, replace the old number with a new one?`);\n      if (wantUpdate) {\n        update(person);\n      }\n    }\n\n    setNewName('');\n    setNewNumber('');\n\n  };\n\n  const save = () => {\n    return saveContact(newName, newNumber)\n        .then((newContact) => {\n          setNewNotification(\n              {message: `Added ${newContact.name}`, type: 'info'});\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n          return newContact;\n        })\n        .catch(() => {\n          alert('Ha ocurrido un error al guardar el nuevo contacto');\n          return Promise.reject(\n              new Error('Ha ocurrido un error al guardar el nuevo contacto'));\n        });\n  };\n\n  const update = (person) => {\n    person.number = newNumber;\n    updateContact(person)\n        .then(() => {\n          setNewNotification({message: `Updated ${newName}`, type: 'info'});\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n        })\n        .catch(() => {\n          setNewNotification({\n            message: `Information of ${newName} has already been removed from server`,\n            type: 'error',\n          });\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n        });\n  };\n\n  const changeNameHandler = (evt) => {\n    setNewName(evt.target.value);\n  };\n\n  const changeNumberHandler = (evt) => {\n    setNewNumber(evt.target.value);\n  };\n\n  return (\n      <form onSubmit={submitHandler}>\n        <div>\n          <label>name: </label>\n          <input onChange={changeNameHandler} value={newName}/>\n        </div>\n        <div>\n          <label>number: </label>\n          <input onChange={changeNumberHandler} value={newNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  );\n};","import React from 'react';\nimport {deleteContact} from '../services/BBDD';\n\nexport const Persons = ({persons, filter, setPersons}) => {\n\n  const clickHandler = ({name, id}) => {\n\n    const result = window.confirm(`Delete ${name}?`);\n    if (result) {\n      const newPersons = persons.filter((person) => person.id !== id);\n      setPersons(newPersons);\n\n      deleteContact(id)\n          .then(() => console.log('Contacto borrado correctamente'))\n          .catch(() => console.error('Error al borrar el contacto'));\n    }\n\n  };\n\n  return (\n      persons.filter(\n          person => filter === '' ? true :\n              person.name.toLowerCase().includes(filter.toLowerCase()))\n             .map(person =>\n                 <div key={person.id}>{\n                   person.name} {person.number}\n                   <button onClick={() => clickHandler(person)}>Delete\n                   </button>\n                 </div>,\n             )\n  );\n};","export const Filter = ({newFilter, setNewFilter}) => {\n\n  const changeHandler = (evt) => {\n    setNewFilter(evt.target.value);\n  };\n\n  return (\n      <div>\n        <span>Filter shown with</span>\n        <input onChange={changeHandler} value={newFilter}/>\n      </div>\n  );\n};","import '../styles/notification.css';\n\nexport const Notification = ({message}) => {\n  const clase = `notification ${message.type}`;\n\n  if (message.message === undefined) {\n    return null;\n  }\n\n  return (\n      <div className={clase}>\n        {message.message}\n      </div>\n  );\n};","import React, {useEffect, useState} from 'react';\nimport {PersonForm} from './components/PersonForm.js';\nimport {Persons} from './components/Persons.js';\nimport {Filter} from './components/Filter.js';\nimport {Notification} from './components/Notification';\nimport {getAllContacts} from './services/BBDD';\nimport './App.css';\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [newNotification, setNewNotification] = useState({});\n\n  useEffect(() => {\n        getAllContacts()\n            .then(data => setPersons(data))\n            .catch(e => console.error('Error en el GET:', e));\n      }\n      , []);\n\n  return (\n      <div className={'container'}>\n        <h2>Phonebook</h2>\n        <Notification message={newNotification}/>\n        <Filter newFilter={newFilter} setNewFilter={setNewFilter}/>\n        <h2>Add a new</h2>\n        <PersonForm persons={persons} setPersons={setPersons} newName={newName}\n                    setNewName={setNewName}\n                    newNumber={newNumber} setNewNumber={setNewNumber}\n                    setNewNotification={setNewNotification}/>\n        <h2>Numbers</h2>\n        <Persons persons={persons} filter={newFilter} setPersons={setPersons}/>\n      </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n      <App/>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}