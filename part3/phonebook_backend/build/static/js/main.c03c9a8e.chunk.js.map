{"version":3,"sources":["services/BBDD.js","components/PersonForm.js","components/Persons.js","components/Filter.js","components/Notification.js","App.js","index.js"],"names":["URL","PersonForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setNewNotification","save","name","number","axios","post","then","message","type","setTimeout","catch","alert","update","person","put","id","response","data","updateContact","onSubmit","evt","preventDefault","find","undefined","length","window","confirm","auxPersons","onChange","target","value","Persons","filter","clickHandler","newPersons","delete","deleteContact","console","log","error","toLowerCase","includes","map","onClick","Filter","newFilter","setNewFilter","Notification","clase","className","App","useState","newNotification","useEffect","get","e","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c03c9a8e.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst URL = '/api/persons';\n\nexport const getAllContacts = () => {\n  return axios.get(URL).then(response => response.data);\n};\n\nexport const saveContact = (name, number) => {\n  return axios.post(URL, {name: name, number: number});\n};\n\nexport const deleteContact = (id) => {\n  return axios.delete(`${URL}/${id}`);\n};\n\nexport const updateContact = (person) => {\n  return axios.put(`${URL}/${person.id}`, person)\n              .then((response) => response.data);\n};","import React from 'react';\nimport {saveContact, updateContact} from '../services/BBDD';\n\nexport const PersonForm = ({\n  persons,\n  setPersons,\n  newName,\n  setNewName,\n  newNumber,\n  setNewNumber,\n  setNewNotification,\n}) => {\n\n  const submitHandler = (evt) => {\n    evt.preventDefault();\n\n    const person = persons.find((person) => person.name === newName);\n\n    if (person === undefined) {\n      save();\n      setPersons([\n        ...persons,\n        {name: newName, number: newNumber, id: persons.length + 1}]);\n    } else {\n      const wantUpdate = window.confirm(\n          `${person.name} is already added to phonebook, replace the old number with a new one?`);\n      if (wantUpdate) {\n        update(person);\n        let auxPersons = persons;\n        auxPersons[person.id - 1].number = person.number;\n        setPersons(auxPersons);\n      }\n    }\n\n    setNewName('');\n    setNewNumber('');\n\n  };\n\n  const save = () => {\n    saveContact(newName, newNumber)\n        .then(() => {\n          setNewNotification({message: `Added ${newName}`, type: 'info'});\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n        })\n        .catch(() => alert(\n            'Ha ocurrido un error al guardar el nuevo contacto'));\n  };\n\n  const update = (person) => {\n    person.number = newNumber;\n    updateContact(person)\n        .then(() => {\n          setNewNotification({message: `Updated ${newName}`, type: 'info'});\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n        })\n        .catch(() => {\n          setNewNotification({\n            message: `Information of ${newName} has already been removed from server`,\n            type: 'error',\n          });\n          setTimeout(() => {\n            setNewNotification({});\n          }, 3000);\n        });\n  };\n\n  const changeNameHandler = (evt) => {\n    setNewName(evt.target.value);\n  };\n\n  const changeNumberHandler = (evt) => {\n    setNewNumber(evt.target.value);\n  };\n\n  return (\n      <form onSubmit={submitHandler}>\n        <div>\n          <label>name: </label>\n          <input onChange={changeNameHandler} value={newName}/>\n        </div>\n        <div>\n          <label>number: </label>\n          <input onChange={changeNumberHandler} value={newNumber}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  );\n};","import React from 'react';\nimport {deleteContact} from '../services/BBDD';\n\nexport const Persons = ({persons, filter, setPersons}) => {\n\n  const clickHandler = ({name, id}) => {\n\n    const result = window.confirm(`Delete ${name}?`);\n    if (result) {\n      const newPersons = persons.filter((person) => person.id !== id);\n      setPersons(newPersons);\n\n      deleteContact(id)\n          .then(() => console.log('Contacto borrado correctamente'))\n          .catch(() => console.error('Error al borrar el contacto'));\n    }\n\n  };\n\n  return (\n      persons.filter(\n          person => filter === '' ? true :\n              person.name.toLowerCase().includes(filter.toLowerCase()))\n             .map(person =>\n                 <div key={person.id}>{\n                   person.name} {person.number}\n                   <button onClick={() => clickHandler(person)}>Delete\n                   </button>\n                 </div>,\n             )\n  );\n};","export const Filter = ({newFilter, setNewFilter}) => {\n\n  const changeHandler = (evt) => {\n    setNewFilter(evt.target.value);\n  };\n\n  return (\n      <div>\n        <span>Filter shown with</span>\n        <input onChange={changeHandler} value={newFilter}/>\n      </div>\n  );\n};","import '../styles/notification.css';\n\nexport const Notification = ({message}) => {\n  const clase = `notification ${message.type}`;\n\n  if (message.message === undefined) {\n    return null;\n  }\n\n  return (\n      <div className={clase}>\n        {message.message}\n      </div>\n  );\n};","import React, {useEffect, useState} from 'react';\nimport {PersonForm} from './components/PersonForm.js';\nimport {Persons} from './components/Persons.js';\nimport {Filter} from './components/Filter.js';\nimport {Notification} from './components/Notification';\nimport {getAllContacts} from './services/BBDD';\nimport './App.css';\n\nconst App = () => {\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [newNotification, setNewNotification] = useState({});\n\n  useEffect(() => {\n        getAllContacts()\n            .then(data => setPersons(data))\n            .catch(e => console.error('Error en el GET:', e));\n      }\n      , []);\n\n  return (\n      <div className={'container'}>\n        <h2>Phonebook</h2>\n        <Notification message={newNotification}/>\n        <Filter newFilter={newFilter} setNewFilter={setNewFilter}/>\n        <h2>Add a new</h2>\n        <PersonForm persons={persons} setPersons={setPersons} newName={newName}\n                    setNewName={setNewName}\n                    newNumber={newNumber} setNewNumber={setNewNumber}\n                    setNewNotification={setNewNotification}/>\n        <h2>Numbers</h2>\n        <Persons persons={persons} filter={newFilter} setPersons={setPersons}/>\n      </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <React.StrictMode>\n      <App/>\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}